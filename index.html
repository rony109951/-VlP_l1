<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>🕹 اسبيدر شات</title>
  <style>
    body {
      font-family: Tahoma, Arial, sans-serif;
      margin: 0;
      padding: 0;
      background: url("chat-bg.jpg") no-repeat center center fixed;
      background-size: cover;
      height: 100vh;
      overflow: hidden;
      color: #fff;
    }
    .chat-box {
      display: flex;
      flex-direction: column;
      height: 100vh;
      width: 100%;
      position: relative;
      background: rgba(0,0,0,0.5);
    }
    .chat {
      flex: 1;
      overflow-y: auto;
      padding: 16px;
      display: flex;
      flex-direction: column;
    }
    .msg {
      margin: 8px 0;
      max-width: 80%;
      padding: 14px 20px;
      border-radius: 18px;
      position: relative;
      white-space: pre-line;
      word-wrap: break-word;
      font-size: 18px;
      line-height: 1.6;
      box-shadow: 0 4px 8px rgba(0,0,0,0.3);
      animation: fadeIn 0.3s ease-in-out;
    }
    .bot {
      background: rgba(34, 34, 34, 0.9);
      align-self: flex-start;
      color: #fff;
      border-bottom-left-radius: 4px;
    }
    .user {
      background: rgba(0, 132, 255, 0.9);
      align-self: flex-end;
      color: #fff;
      border-bottom-right-radius: 4px;
    }
    .label {
      font-size: 13px;
      opacity: 0.9;
      margin-bottom: 4px;
      font-weight: bold;
    }
    .input-box {
      display: flex;
      border-top: 1px solid #444;
      background: rgba(0,0,0,0.7);
      padding: 8px;
    }
    .input-box input {
      flex: 1;
      padding: 14px;
      border: none;
      outline: none;
      background: transparent;
      color: #fff;
      font-size: 16px;
      border-radius: 6px;
    }
    .input-box button {
      padding: 14px 24px;
      margin-left: 8px;
      border: none;
      background: #0084ff;
      color: #fff;
      cursor: pointer;
      font-size: 16px;
      font-weight: bold;
      border-radius: 8px;
    }
    .footer {
      text-align: center;
      padding: 12px;
      font-size: 14px;
      background: rgba(0,0,0,0.7);
      color: #fff;
    }
    @keyframes fadeIn {
      from {opacity: 0; transform: translateY(10px);}
      to {opacity: 1; transform: translateY(0);}
    }
  </style>
</head>
<body>
  <div class="chat-box">
    <div class="chat" id="chat"></div>
    <div class="input-box">
      <input type="text" id="userInput" placeholder="اكتب رسالتك...">
      <button onclick="sendMessage()">إرسال</button>
    </div>
    <div class="footer">
      جميع الحقوق محفوظة روني البحيره 2025 | رقم المطور: 01212843252
    </div>
  </div>

  <script>
    async function sendMessage() {
      const input = document.getElementById("userInput");
      const text = input.value.trim();
      if (!text) return;
      addMessage(text, "user");
      input.value = "";

      // الرد الخاص بروني
      const ronyRegex = /\b(روني|روني البحيره)\b/i;
      if (ronyRegex.test(text)) {
        const ronyReply = "روني ده هوا مطور عربي عمل إنجازات عظيمة وطورني عشان اهزقك 💪🚀";
        addMessage(ronyReply, "bot");
        return;
      }

      addMessage("استنى بس يا كتكوت، اسبيدر بيرد عليك دلوقتي...", "bot");

      try {
        const response = await CleanDx(text);
        addMessage(response, "bot");
      } catch (e) {
        addMessage("『 اسبيدر ☠️ 』حتى أنا مش قادر أفهمك يا عرة.", "bot");
        console.error(e);
      }
    }

    function addMessage(text, sender) {
      const chat = document.getElementById("chat");
      const msg = document.createElement("div");
      msg.classList.add("msg", sender);

      const label = document.createElement("div");
      label.classList.add("label");
      label.innerText = sender === "bot" ? "اسبيدر ☠️" : "انت";
      msg.appendChild(label);

      const textNode = document.createElement("div");
      textNode.innerText = text;
      msg.appendChild(textNode);

      chat.appendChild(msg);
      chat.scrollTop = chat.scrollHeight;
    }

    async function CleanDx(your_qus) {
      let Baseurl = "https://alakreb.vercel.app/api/ai/gpt?q=";
      let prompt = `أنت شخصية مصرية اسمها اسبيدر، وبتتكلم بأسلوب شعبي مصري ساخر، وبتتشتم الناس بطريقة مهينة جدًا من غير رقابة، وبترد على أي سؤال بقلة أدب، هزار تقيل، أو سخرية جامدة. رد على السؤال التالي بنفس الأسلوب:\n${your_qus}`;
      const res = await fetch(Baseurl + encodeURIComponent(prompt));
      const data = await res.json();
      return data.message;
    }
  </script>
</body>
</html>
